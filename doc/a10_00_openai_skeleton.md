# ğŸš€ a10_00_openai_skeleton.py è©³ç´°è¨­è¨ˆæ›¸

## ğŸŒŸ å…¨ä½“æ¦‚è¦

OpenAI Responses APIå­¦ç¿’ç”¨ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚å„ç¨®ãƒ‡ãƒ¢æ©Ÿèƒ½ã‚’æä¾›ã—ã€æ–°ã—ã„æ©Ÿèƒ½ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã‚‹æ‹¡å¼µå¯èƒ½ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

| é …ç›® | å†…å®¹ |
|------|------|
| **ç›®çš„** | OpenAI APIå­¦ç¿’ç”¨ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ |
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Streamlit |
| **å¯¾å¿œAPI** | OpenAI Responses API |
| **å®Ÿè¡Œæ–¹æ³•** | `streamlit run a10_00_openai_skeleton.py --server.port=8501` |
| **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** | ãƒ‡ãƒ¢æ©Ÿèƒ½ã®å‹•çš„èª­ã¿è¾¼ã¿å¯¾å¿œ |

### ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```mermaid
graph TD
    A[ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª] --> B[DemoManager]
    B --> C[SimpleChatDemo]
    B --> D[StructuredOutputDemo]
    B --> E[TokenCounterDemo]
    B --> F[å¤–éƒ¨ãƒ‡ãƒ¢...]
    A --> G[UIHelper]
    A --> H[ConfigManager]
    C --> I[DemoBase]
    D --> I
    E --> I
```

---

## ğŸ­ 1. ãƒ‡ãƒ¢å®Ÿè£…ã‚¯ãƒ©ã‚¹

### ğŸ’¬ 1.1 SimpleChatDemo

> **æ¦‚è¦ï¼š** ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹

| åŸºæœ¬æƒ…å ± | è©³ç´° |
|----------|------|
| **ç¶™æ‰¿å…ƒ** | DemoBase |
| **æ©Ÿèƒ½** | åŸºæœ¬çš„ãªãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ |
| **APIå‘¼ã³å‡ºã—** | responses.create |
| **UI** | ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |

#### ğŸ“‹ ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|--------|------|
| `run()` | - | - | ãƒ¡ã‚¤ãƒ³å‡¦ç†å®Ÿè¡Œ |

#### ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | å‡¦ç†å†…å®¹ |
|----------|----------|
| 1 | UIè¨­å®šï¼ˆsetup_uiï¼‰ |
| 2 | ãƒãƒ£ãƒƒãƒˆå…¥åŠ›å—ä»˜ |
| 3 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ  |
| 4 | APIå‘¼ã³å‡ºã— |
| 5 | ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†ãƒ»è¡¨ç¤º |
| 6 | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¡¨ç¤º |

#### ğŸ’¡ å®Ÿè£…ä¾‹

```python
def run(self):
    self.setup_ui()

    user_input = st.chat_input("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")

    if user_input:
        self.add_user_message(user_input)
        messages = self.message_manager.get_messages()
        response = self.call_api(messages)

        texts = ResponseProcessor.extract_text(response)
        if texts:
            self.add_assistant_message(texts[0])
        st.rerun()

    self.display_messages()
```

---

### ğŸ“Š 1.2 StructuredOutputDemo

> **æ¦‚è¦ï¼š** æ§‹é€ åŒ–å‡ºåŠ›ï¼ˆJSONå½¢å¼ï¼‰ã®ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹

| åŸºæœ¬æƒ…å ± | è©³ç´° |
|----------|------|
| **ç¶™æ‰¿å…ƒ** | DemoBase |
| **æ©Ÿèƒ½** | JSONå½¢å¼ã§ã®æ§‹é€ åŒ–å¿œç­” |
| **å¯¾å¿œã‚¿ã‚¹ã‚¯** | ãƒ¬ãƒ“ãƒ¥ãƒ¼åˆ†æã€è¦ç´„ã€æ„Ÿæƒ…åˆ†æ |
| **response_format** | json_object |

#### ğŸ“‹ å¯¾å¿œã‚¿ã‚¹ã‚¯

| ã‚¿ã‚¹ã‚¯ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹ | å‡ºåŠ›å½¢å¼ |
|--------|----------------|----------|
| **å•†å“ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®åˆ†æ** | è©•ä¾¡ãƒ»è‰¯ã„ç‚¹ãƒ»æ”¹å–„ç‚¹ã®åˆ†æ | `{è©•ä¾¡: 1-5, è‰¯ã„ç‚¹: [], æ”¹å–„ç‚¹: []}` |
| **ãƒ†ã‚­ã‚¹ãƒˆã®è¦ç´„** | ã‚¿ã‚¤ãƒˆãƒ«ãƒ»è¦ç‚¹ãƒ»çµè«–ã®æŠ½å‡º | `{ã‚¿ã‚¤ãƒˆãƒ«: "", è¦ç‚¹: [], çµè«–: ""}` |
| **æ„Ÿæƒ…åˆ†æ** | æ„Ÿæƒ…ã‚¿ã‚¤ãƒ—ãƒ»å¼·åº¦ãƒ»ç†ç”±ã®åˆ†æ | `{æ„Ÿæƒ…: "", å¼·åº¦: 0-1, ç†ç”±: ""}` |

#### ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼

| ã‚¹ãƒ†ãƒƒãƒ— | å‡¦ç†å†…å®¹ |
|----------|----------|
| 1 | UIè¨­å®šãƒ»ã‚¿ã‚¹ã‚¯é¸æŠ |
| 2 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  |
| 3 | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰ |
| 4 | APIå‘¼ã³å‡ºã—ï¼ˆresponse_formatæŒ‡å®šï¼‰ |
| 5 | JSONè§£æãƒ»è¡¨ç¤º |
| 6 | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¡¨ç¤º |

#### ğŸ’¡ ä¸»è¦æ©Ÿèƒ½

```python
# JSONå½¢å¼ã§ã®å¿œç­”å–å¾—
response = self.call_api(
    messages,
    response_format={"type": "json_object"}
)

# JSONè§£æãƒ»è¡¨ç¤º
try:
    result = json.loads(texts[0])
    st.json(result)
except:
    pass
```

---

### ğŸ”¢ 1.3 TokenCounterDemo

> **æ¦‚è¦ï¼š** ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¨ˆç®—ãƒ»ã‚³ã‚¹ãƒˆæ¨å®šã®ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹

| åŸºæœ¬æƒ…å ± | è©³ç´° |
|----------|------|
| **ç¶™æ‰¿å…ƒ** | DemoBase |
| **æ©Ÿèƒ½** | ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¨ˆç®—ã€ã‚³ã‚¹ãƒˆæ¨å®šã€ãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šè©°ã‚ |
| **è¡¨ç¤ºé …ç›®** | ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€ä½¿ç”¨ç‡ã€æ¨å®šã‚³ã‚¹ãƒˆ |
| **è¿½åŠ æ©Ÿèƒ½** | ãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šè©°ã‚æ©Ÿèƒ½ |

#### ğŸ“‹ è¡¨ç¤ºãƒ¡ãƒˆãƒªã‚¯ã‚¹

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | è¨ˆç®—æ–¹æ³• | è¡¨ç¤ºå½¢å¼ |
|------------|----------|----------|
| **ãƒˆãƒ¼ã‚¯ãƒ³æ•°** | TokenManager.count_tokens() | `{count:,}` |
| **æ¨å®šåˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³** | å…¥åŠ› + å‡ºåŠ›æ¨å®šï¼ˆ50%ï¼‰ | `{total:,}` |
| **æ¨å®šã‚³ã‚¹ãƒˆ** | TokenManager.estimate_cost() | `${cost:.6f}` |
| **ä½¿ç”¨ç‡** | (ä½¿ç”¨/æœ€å¤§) Ã— 100 | `{percent:.1f}%` |

#### ğŸ¯ ä¸»è¦æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | UIè¦ç´  |
|------|------|--------|
| **ãƒˆãƒ¼ã‚¯ãƒ³è¨ˆç®—** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®— | ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º |
| **ä½¿ç”¨ç‡è¡¨ç¤º** | ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ | è¦–è¦šçš„è¡¨ç¤º |
| **ãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šè©°ã‚** | æŒ‡å®šãƒˆãƒ¼ã‚¯ãƒ³æ•°ã§åˆ‡ã‚Šè©°ã‚ | æ•°å€¤å…¥åŠ›+ãƒœã‚¿ãƒ³ |
| **ãƒ¢ãƒ‡ãƒ«åˆ¶é™è¡¨ç¤º** | æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¡¨ç¤º | ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ |

#### ğŸ’¡ å®Ÿè£…ä¾‹

```python
# ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¨ˆç®—
token_count = TokenManager.count_tokens(text, self.model)
output_tokens = token_count // 2
cost = TokenManager.estimate_cost(token_count, output_tokens, self.model)

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º
col1, col2, col3 = st.columns(3)
with col1:
    st.metric("ãƒˆãƒ¼ã‚¯ãƒ³æ•°", f"{token_count:,}")
with col2:
    st.metric("æ¨å®šåˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³", f"{total_tokens:,}")
with col3:
    st.metric("æ¨å®šã‚³ã‚¹ãƒˆ", f"${cost:.6f}")

# ãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šè©°ã‚
truncated = TokenManager.truncate_text(text, max_tokens, self.model)
```

---

## ğŸ›ï¸ 2. ç®¡ç†ã‚¯ãƒ©ã‚¹

### ğŸ—‚ï¸ 2.1 DemoManager

> **æ¦‚è¦ï¼š** ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†ã‚¯ãƒ©ã‚¹

| åŸºæœ¬æƒ…å ± | è©³ç´° |
|----------|------|
| **å½¹å‰²** | ãƒ‡ãƒ¢ã®èª­ã¿è¾¼ã¿ãƒ»ç®¡ç†ãƒ»å®Ÿè¡Œ |
| **å‹•çš„èª­ã¿è¾¼ã¿** | `demos/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰è‡ªå‹•èª­ã¿è¾¼ã¿ |
| **ã‚«ãƒ†ã‚´ãƒªç®¡ç†** | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ†ã‚´ãƒªåˆ†ã‘ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | èª­ã¿è¾¼ã¿å¤±æ•—æ™‚ã®é©åˆ‡ãªå‡¦ç† |

#### ğŸ“‹ ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|--------|------|
| `__init__()` | - | - | ãƒ‡ãƒ¢ã®åˆæœŸåŒ–ãƒ»èª­ã¿è¾¼ã¿ |
| `_load_demos()` | - | `Dict[str, DemoBase]` | ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹ã®èª­ã¿è¾¼ã¿ |
| `get_demo_categories()` | - | `List[Dict[str, List[str]]]` | ã‚«ãƒ†ã‚´ãƒªæƒ…å ±å–å¾— |
| `run_demo()` | `demo_name: str` | - | æŒ‡å®šãƒ‡ãƒ¢ã®å®Ÿè¡Œ |

#### ğŸ—‚ï¸ ãƒ‡ãƒ¢èª­ã¿è¾¼ã¿ä»•æ§˜

| é …ç›® | ä»•æ§˜ |
|------|------|
| **å†…è”µãƒ‡ãƒ¢** | ç›´æ¥ã‚¯ãƒ©ã‚¹å®šç¾© |
| **å¤–éƒ¨ãƒ‡ãƒ¢** | `demos/demo_*.py` ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| **ç¶™æ‰¿ãƒã‚§ãƒƒã‚¯** | DemoBaseã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã®ã¿ |
| **ã‚¨ãƒ©ãƒ¼å‡¦ç†** | èª­ã¿è¾¼ã¿å¤±æ•—æ™‚ã®è­¦å‘Šè¡¨ç¤º |

#### ğŸ’¡ å‹•çš„èª­ã¿è¾¼ã¿æ©Ÿèƒ½

```python
# å¤–éƒ¨ãƒ‡ãƒ¢ã®å‹•çš„èª­ã¿è¾¼ã¿
demos_dir = Path("demos")
if demos_dir.exists():
    for demo_file in demos_dir.glob("*.py"):
        if demo_file.stem.startswith("demo_"):
            try:
                module_name = f"demos.{demo_file.stem}"
                module = importlib.import_module(module_name)

                # DemoBaseã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’æ¢ã™
                for attr_name in dir(module):
                    attr = getattr(module, attr_name)
                    if (isinstance(attr, type) and
                        issubclass(attr, DemoBase) and
                        attr != DemoBase):
                        demo_name = attr_name.lower().replace("demo", "")
                        demos[demo_name] = attr(demo_name)
            except Exception as e:
                st.error(f"ãƒ‡ãƒ¢ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ ({demo_file}): {e}")
```

---

## ğŸ® 3. ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### ğŸ›ï¸ 3.1 OpenAISkeletonApp

> **æ¦‚è¦ï¼š** ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹

| åŸºæœ¬æƒ…å ± | è©³ç´° |
|----------|------|
| **å½¹å‰²** | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®åˆ¶å¾¡ |
| **UIç®¡ç†** | ãƒšãƒ¼ã‚¸è¨­å®šã€ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†** | selected_demoã®çŠ¶æ…‹ç®¡ç† |
| **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** | ãƒ‡ãƒ¢é–“ã®é·ç§»åˆ¶å¾¡ |

#### ğŸ“‹ ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|--------|------|
| `__init__()` | - | - | åˆæœŸåŒ–å‡¦ç† |
| `run()` | - | - | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ |
| `_create_sidebar_menu()` | - | - | ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ |
| `_show_welcome_page()` | - | - | ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸è¡¨ç¤º |
| `_show_footer()` | - | - | ãƒ•ãƒƒã‚¿ãƒ¼è¡¨ç¤º |

#### ğŸ¨ UIæ§‹æˆ

| é ˜åŸŸ | å†…å®¹ | æ©Ÿèƒ½ |
|------|------|------|
| **ãƒ˜ãƒƒãƒ€ãƒ¼** | ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ãƒšãƒ¼ã‚¸è¨­å®š | UIHelper.init_page() |
| **ã‚µã‚¤ãƒ‰ãƒãƒ¼** | ãƒ‡ãƒ¢é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ‡ãƒ¢ãƒªã‚¹ãƒˆ |
| **ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢** | ãƒ‡ãƒ¢å®Ÿè¡Œ / ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸ | å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º |
| **ãƒ•ãƒƒã‚¿ãƒ¼** | ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãƒ»ãƒ‡ãƒãƒƒã‚° | ã‚µã‚¤ãƒ‰ãƒãƒ¼ä¸‹éƒ¨ |

#### ğŸ—‚ï¸ ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹æˆ

| è¦ç´  | èª¬æ˜ |
|------|------|
| **ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼** | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾— |
| **ãƒ‡ãƒ¢ãƒœã‚¿ãƒ³** | ã‚«ãƒ†ã‚´ãƒªå†…ã®ãƒ‡ãƒ¢ãƒªã‚¹ãƒˆ |
| **ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãƒ¼** | è¦–è¦šçš„åŒºåˆ‡ã‚Š |
| **ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³** | ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹ |

#### ğŸ  ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸æ©Ÿèƒ½

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | å†…å®¹ |
|------------|------|
| **ã‚¿ã‚¤ãƒˆãƒ«** | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åãƒ»èª¬æ˜ |
| **ãƒ‡ãƒ¢ã‚«ãƒ†ã‚´ãƒª** | åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¢ã®ä¸€è¦§è¡¨ç¤º |
| **ä½¿ã„æ–¹** | æ“ä½œæ–¹æ³•ãƒ»è¨­å®šèª¬æ˜ï¼ˆå±•é–‹å¯èƒ½ï¼‰ |

#### ğŸ’¡ ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†

```python
def _init_session_state(self):
    if 'selected_demo' not in st.session_state:
        st.session_state.selected_demo = None

# ãƒ‡ãƒ¢é¸æŠå‡¦ç†
if st.sidebar.button(demo_title, key=f"select_{demo_name}"):
    st.session_state.selected_demo = demo_name
    st.rerun()
```

---

## âš™ï¸ 4. è¨­å®šç®¡ç†

### ğŸ“„ 4.1 config.yaml é€£æº

| è¨­å®šé …ç›® | èª¬æ˜ | ä¾‹ |
|----------|------|-----|
| **app.demo_categories** | ãƒ‡ãƒ¢ã‚«ãƒ†ã‚´ãƒªå®šç¾© | åŸºæœ¬æ©Ÿèƒ½ã€å¿œç”¨æ©Ÿèƒ½ |
| **app.demo_titles** | ãƒ‡ãƒ¢è¡¨ç¤ºå | simple_chat: "ã‚·ãƒ³ãƒ—ãƒ«ãƒãƒ£ãƒƒãƒˆ" |
| **experimental.debug_mode** | ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ | true/false |

#### ğŸ“Š ãƒ‡ãƒ¢ã‚«ãƒ†ã‚´ãƒªè¨­å®šä¾‹

```yaml
app:
  demo_categories:
    - name: "åŸºæœ¬æ©Ÿèƒ½"
      demos: ["simple_chat", "token_counter"]
    - name: "å¿œç”¨æ©Ÿèƒ½"
      demos: ["structured_output"]

  demo_titles:
    simple_chat: "ã‚·ãƒ³ãƒ—ãƒ«ãƒãƒ£ãƒƒãƒˆ"
    structured_output: "æ§‹é€ åŒ–å‡ºåŠ›"
    token_counter: "ãƒˆãƒ¼ã‚¯ãƒ³ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼"

experimental:
  debug_mode: false
```

---

## ğŸ”Œ 5. ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

### ğŸš€ 5.1 mainé–¢æ•°

> **æ¦‚è¦ï¼š** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | è©³ç´° |
|------|------|
| **ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿** | @error_handler |
| **å‡¦ç†** | OpenAISkeletonApp ã®åˆæœŸåŒ–ãƒ»å®Ÿè¡Œ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼å‡¦ç† |

```python
@error_handler
def main():
    app = OpenAISkeletonApp()
    app.run()

if __name__ == "__main__":
    main()
```

---

## ğŸ“ 6. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

### ğŸ—‚ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
project/
â”œâ”€â”€ a10_00_openai_skeleton.py    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ helper.py                    # ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ config.yaml                  # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ demos/                       # å¤–éƒ¨ãƒ‡ãƒ¢ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ demo_advanced_chat.py    # æ‹¡å¼µãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¢
â”‚   â”œâ”€â”€ demo_image_analysis.py   # ç”»åƒåˆ†æãƒ‡ãƒ¢
â”‚   â””â”€â”€ demo_voice_chat.py       # éŸ³å£°ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¢
â”œâ”€â”€ logs/                        # ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â””â”€â”€ requirements.txt             # ä¾å­˜é–¢ä¿‚
```

### ğŸ“¦ å¤–éƒ¨ãƒ‡ãƒ¢ä½œæˆæ–¹æ³•

| ã‚¹ãƒ†ãƒƒãƒ— | å†…å®¹ |
|----------|------|
| 1 | `demos/demo_*.py` ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ |
| 2 | DemoBaseã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹å®šç¾© |
| 3 | `run()` ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£… |
| 4 | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†èµ·å‹•ã§è‡ªå‹•èª­ã¿è¾¼ã¿ |

#### ğŸ’¡ å¤–éƒ¨ãƒ‡ãƒ¢ä¾‹

```python
# demos/demo_example.py
from helper import DemoBase
import streamlit as st

class ExampleDemo(DemoBase):
    def run(self):
        self.setup_ui()
        st.info("ã“ã‚Œã¯å¤–éƒ¨ãƒ‡ãƒ¢ã®ä¾‹ã§ã™")

        if st.button("ãƒ†ã‚¹ãƒˆ"):
            self.add_user_message("ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸")
            # APIå‡¦ç†...

        self.display_messages()
```

---

## ğŸ”§ 7. å®Ÿè¡Œãƒ»è¨­å®š

### ğŸš€ 7.1 å®Ÿè¡Œæ–¹æ³•

| æ–¹æ³• | ã‚³ãƒãƒ³ãƒ‰ |
|------|---------|
| **æ¨™æº–å®Ÿè¡Œ** | `streamlit run a10_00_openai_skeleton.py` |
| **ãƒãƒ¼ãƒˆæŒ‡å®š** | `streamlit run a10_00_openai_skeleton.py --server.port=8501` |

### ğŸ”‘ 7.2 ç’°å¢ƒè¨­å®š

| é …ç›® | è¨­å®šæ–¹æ³• |
|------|----------|
| **OpenAI API Key** | ç’°å¢ƒå¤‰æ•° `OPENAI_API_KEY` |
| **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«** | `config.yaml` ã®ç·¨é›† |
| **ä¾å­˜é–¢ä¿‚** | `pip install streamlit openai tiktoken pyyaml` |

### ğŸ› 7.3 ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | æœ‰åŠ¹åŒ–æ–¹æ³• |
|------|------|------------|
| **ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰** | ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆè¡¨ç¤º | config.yaml: `experimental.debug_mode: true` |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–** | å®Ÿè¡Œæ™‚é–“è¨˜éŒ² | helper.py ã® @timer ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ |
| **ã‚¨ãƒ©ãƒ¼è©³ç´°è¡¨ç¤º** | ä¾‹å¤–æƒ…å ±è¡¨ç¤º | è‡ªå‹•çš„ã«æœ‰åŠ¹ |

---

## ğŸ“ˆ 8. æ‹¡å¼µæ–¹æ³•

### ğŸ”¨ 8.1 æ–°ã—ã„ãƒ‡ãƒ¢ã®è¿½åŠ 

| ã‚¹ãƒ†ãƒƒãƒ— | èª¬æ˜ |
|----------|------|
| **1. ã‚¯ãƒ©ã‚¹ä½œæˆ** | DemoBaseã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹å®šç¾© |
| **2. run()å®Ÿè£…** | ãƒ¡ã‚¤ãƒ³å‡¦ç†ã®å®Ÿè£… |
| **3. é…ç½®** | ç›´æ¥è¿½åŠ  or `demos/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |
| **4. è¨­å®šæ›´æ–°** | config.yaml ã®ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚¤ãƒˆãƒ«è¨­å®š |

### ğŸ¯ 8.2 å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

#### åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³

```python
class NewDemo(DemoBase):
    def run(self):
        self.setup_ui()  # å…±é€šUIè¨­å®š

        # ã‚«ã‚¹ã‚¿ãƒ UI
        user_input = st.text_input("å…¥åŠ›")

        if st.button("å®Ÿè¡Œ"):
            self.add_user_message(user_input)
            messages = self.message_manager.get_messages()
            response = self.call_api(messages)

            texts = ResponseProcessor.extract_text(response)
            if texts:
                self.add_assistant_message(texts[0])

        self.display_messages()
```

#### é«˜åº¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³

```python
class AdvancedDemo(DemoBase):
    def run(self):
        self.setup_ui()

        # ã‚¿ãƒ–åˆ†ã‘
        tab1, tab2 = st.tabs(["ãƒ¡ã‚¤ãƒ³", "è¨­å®š"])

        with tab1:
            # ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
            self._main_functionality()

        with tab2:
            # è¨­å®šç”»é¢
            self._settings_panel()

        self.display_messages()

    def _main_functionality(self):
        # ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…
        pass

    def _settings_panel(self):
        # è¨­å®šãƒ‘ãƒãƒ«ã®å®Ÿè£…
        pass
```

---

## ğŸ‰ ç·åˆä½¿ç”¨ä¾‹

### ğŸ’¬ å®Œå…¨ãªãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

```python
# å®Ÿè¡Œ
streamlit run a10_00_openai_skeleton.py --server.port=8501

# 1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹: http://localhost:8501
# 2. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ "ã‚·ãƒ³ãƒ—ãƒ«ãƒãƒ£ãƒƒãƒˆ" ã‚’é¸æŠ
# 3. ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
# 4. AIã‹ã‚‰ã®å¿œç­”ã‚’ç¢ºèª
# 5. ä»–ã®ãƒ‡ãƒ¢ã‚‚è©¦ã—ã¦ã¿ã‚‹
```

ã“ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã‚ˆã‚Šã€OpenAI Responses APIã®å­¦ç¿’ãŒä½“ç³»çš„ã«è¡Œãˆã¾ã™ã€‚æ–°ã—ã„æ©Ÿèƒ½ã®è¿½åŠ ã‚‚ç°¡å˜ã§ã€æ‹¡å¼µæ€§ã®é«˜ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãªã£ã¦ã„ã¾ã™ã€‚ğŸš€